{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Documents\\\\Ahimsha\\\\Dicoding\\\\Capstone-Project-FERE-C22-072-main\\\\capstoneProject(global)\\\\src\\\\pages\\\\Auth\\\\Login.js\";\nimport axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Link, Navigate } from \"react-router-dom\";\nimport CONFIG from \"../../Global/Config\";\nimport Cookie from \"../../Global/SetCookie\";\nimport bgLogin from './img/bg-login.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function () {\n  let [email, setEmail] = useState('');\n  let [password, setPassword] = useState('');\n  let [error, setError] = useState({\n    message: '',\n    email: '',\n    password: ''\n  });\n\n  const handleEmail = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  const handleError = data => {\n    setError(error => ({ ...error,\n      ...data\n    }));\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    axios.post(CONFIG.API_URL('/login'), {\n      email: email,\n      password: password\n    }, {\n      headers: {\n        Accept: \"application/json\"\n      }\n    }).then(res => {\n      let response = res.data;\n      handleError({\n        email: '',\n        password: ''\n      });\n\n      if (response.status) {\n        Cookie.set(CONFIG.TOKEN_KEY, response.data.token);\n        window.location = '/';\n      } else {\n        handleError({\n          message: response.message\n        });\n      }\n    }).catch(err => {\n      let response = err.response.data;\n\n      if (response.errors) {\n        if (response.errors.email) {\n          let _error = response.errors.email;\n          handleError({\n            email: _error\n          });\n        }\n\n        if (response.errors.password) {\n          let _error = response.errors.password;\n          handleError({\n            password: _error\n          });\n        }\n      }\n    });\n  };\n\n  if (Cookie.get(CONFIG.TOKEN_KEY)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"row\",\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8 p-5\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: bgLogin,\n          alt: \"\",\n          width: \"90%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mx-auto py-5 my-5 d-flex align-items-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card shadow-sm border-0 flex-1 w-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body py-5\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"Auth-form-title\",\n              children: \"Sign In\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 21\n            }, this), error.message ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"alert alert-danger text-center\",\n              children: error.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 37\n            }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control mt-1\",\n                placeholder: \"Enter email\",\n                onChange: handleEmail\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-danger\",\n                children: error.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control mt-1\",\n                placeholder: \"Enter password\",\n                onChange: handlePassword\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-danger\",\n                children: error.password\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-end mb-3\",\n              children: [\"Forgot \", /*#__PURE__*/_jsxDEV(\"a\", {\n                href: \"#\",\n                className: \"text-decoration-none\",\n                children: \"password?\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 32\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2 mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                children: \"Sign In\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: [\"Not registered yet?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                className: \"text-decoration-none\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 7\n  }, this);\n}","map":{"version":3,"sources":["C:/Users/ASUS/Documents/Ahimsha/Dicoding/Capstone-Project-FERE-C22-072-main/capstoneProject(global)/src/pages/Auth/Login.js"],"names":["axios","React","useEffect","useState","Link","Navigate","CONFIG","Cookie","bgLogin","email","setEmail","password","setPassword","error","setError","message","handleEmail","e","target","value","handlePassword","handleError","data","handleSubmit","preventDefault","post","API_URL","headers","Accept","then","res","response","status","set","TOKEN_KEY","token","window","location","catch","err","errors","_error","get"],"mappings":"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","sourcesContent":["import axios from \"axios\"\nimport React, { useEffect, useState } from \"react\"\nimport { Link, Navigate } from \"react-router-dom\"\nimport CONFIG from \"../../Global/Config\"\nimport Cookie from \"../../Global/SetCookie\"\n\nimport bgLogin from './img/bg-login.jpg'\n\nexport default function () {\n\n    let [email,setEmail] = useState('')\n    let [password,setPassword] = useState('')\n    let [error,setError] = useState({\n        message: '',\n        email: '',\n        password: ''\n    })\n\n    const handleEmail = (e) => {\n        setEmail(e.target.value)\n    }\n    const handlePassword = (e) => {\n        setPassword(e.target.value)\n    }\n\n    const handleError = (data) => {\n        setError((error) => ({\n            ...error,\n            ...data\n        }))\n    }\n\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        \n        axios.post(CONFIG.API_URL('/login'),{\n              email: email,\n              password: password\n            },{\n            headers: {\n                Accept: \"application/json\",\n            }\n        })\n        .then((res) => {\n            let response = res.data\n            handleError({\n                email: '',\n                password: ''\n            })\n            if(response.status){\n                Cookie.set(CONFIG.TOKEN_KEY,response.data.token)\n                window.location = '/'\n            }else{\n                handleError({\n                    message: response.message\n                })\n            }\n           \n        } )\n        .catch((err) => {\n            let response = err.response.data\n            if(response.errors)\n            {\n                if(response.errors.email)\n                {\n                    let _error = response.errors.email\n                    handleError({\n                        email: _error\n                    })\n                }\n                if(response.errors.password)\n                {\n                    let _error = response.errors.password\n                    handleError({\n                        password: _error\n                    })\n                }\n            }\n        })\n\n\n    }\n\n    if(Cookie.get(CONFIG.TOKEN_KEY))\n    {\n        return (<Navigate to=\"/\"/>)\n    }\n    \n    return (\n      <div className=\"container\">\n        <form className=\"row\" onSubmit={handleSubmit}>\n            <div className=\"col-md-8 p-5\">\n                <img src={bgLogin} alt=\"\" width=\"90%\"/>\n            </div>\n          <div className=\"col-md-4 mx-auto py-5 my-5 d-flex align-items-center\">\n            <div className=\"card shadow-sm border-0 flex-1 w-100\">\n                <div className=\"card-body py-5\">\n                    <h3 className=\"Auth-form-title\">Sign In</h3>\n                    {error.message? <div className=\"alert alert-danger text-center\">{error.message}</div> : ''}\n                    <div className=\"mb-3\">\n                        <label>Email address</label>\n                        <input\n                            type=\"email\"\n                            className=\"form-control mt-1\"\n                            placeholder=\"Enter email\"\n                            onChange={handleEmail}\n                        />\n                        <small className=\"text-danger\">{error.email}</small>\n                    </div>\n                    <div className=\"mb-3\">\n                        <label>Password</label>\n                        <input\n                            type=\"password\"\n                            className=\"form-control mt-1\"\n                            placeholder=\"Enter password\"\n                            onChange={handlePassword}\n                        />\n                        <small className=\"text-danger\">{error.password}</small>\n                    </div>\n                    <p className=\"text-end mb-3\">\n                        Forgot <a href=\"#\" className=\"text-decoration-none\">password?</a>\n                    </p>\n                    <div className=\"d-grid gap-2 mb-3\">\n                        <button type=\"submit\" className=\"btn btn-primary\">\n                            Sign In\n                        </button>\n                    </div>\n                    <div className=\"text-center\">\n                        Not registered yet?{\" \"}\n                        <Link to=\"/register\" className=\"text-decoration-none\">\n                            Sign Up\n                        </Link>\n                    </div>\n                </div>\n                </div>\n            </div>\n        </form>\n      </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}